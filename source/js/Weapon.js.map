{"version":3,"sources":["Weapon.ts"],"names":[],"mappings":"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","file":"Weapon.js","sourcesContent":["namespace deltav {\r\n    export class Weapon {\r\n        private velocity = 100;\r\n        private reloadTime = .5;\r\n        private countdown = 0;\r\n\r\n        constructor(private ship: Ship) {\r\n        }\r\n\r\n        public ready() {\r\n            return this.countdown === 0;\r\n        }\r\n\r\n        public update(time: number) {\r\n            this.countdown -= time;\r\n            if (this.countdown < 0) {\r\n                this.countdown = 0;\r\n            }\r\n        }\r\n\r\n        public fire(world: World, position: Vector, velocity: Vector, mass: number) {\r\n            let barrel = position.add(velocity.toUnitVector().multiply(15));\r\n            let shipV = this.ship.getV();\r\n            world.bodies.push(\r\n                new Bullet(\r\n                    this.ship,\r\n                    barrel.e(1),\r\n                    barrel.e(2),\r\n                    shipV.add(shipV.toUnitVector().multiply(this.velocity))));\r\n            this.countdown = this.reloadTime;\r\n        }\r\n    }\r\n\r\n    export class Bullet extends Body {\r\n        constructor(ship: Ship, x: number, y: number, velocity: Vector) {\r\n            super(ship.logger, x, y);\r\n            this.velocity = velocity;\r\n            this.mass = 2;\r\n            this.brush = \"orange\";\r\n            this.heading = ship.getH();\r\n\r\n            this.geometry = [\r\n                Vector.create([-5, -2.5]),\r\n                Vector.create([4, -2.5]),\r\n                Vector.create([6.25, 0]),\r\n                Vector.create([4, 2.5]),\r\n                Vector.create([-5, 2.5]),\r\n            ];\r\n\r\n            for (let i = 0; i < this.geometry.length; i++) {\r\n                this.geometry[i] = this.geometry[i].multiply(0.75);\r\n            }\r\n\r\n        }\r\n\r\n        public update(time: number, world: World, input: Input) {\r\n            super.update(time, world, input);\r\n        }\r\n\r\n        public render(ctx: CanvasRenderingContext2D) {\r\n            super.render(ctx);\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}