{"version":3,"sources":["World.ts"],"names":[],"mappings":"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","file":"World.js","sourcesContent":["namespace deltav {\r\n\r\n    export class World {\r\n        public north = 0;\r\n        public south = 0;\r\n        public east = 0;\r\n        public west = 0;\r\n        public drag = -0.9;\r\n        public bodies = new Array<Body>();\r\n\r\n        private gcCountdown = 10;\r\n\r\n        constructor(private logger: Logger, public width: number, public height: number) {\r\n            this.south = height;\r\n            this.east = width;\r\n\r\n            for (let i = 0; i < 500; i++) {\r\n                this.bodies.push(new Star(\r\n                    this.logger,\r\n                    Math.random() * this.width,\r\n                    Math.random() * this.height,\r\n                    Math.random() * 1.5));\r\n            }\r\n\r\n            for (let i = 0; i < 50; i++) {\r\n                this.bodies.push(new Asteroid(\r\n                    this.logger,\r\n                    Math.random() * this.width,\r\n                    Math.random() * this.height,\r\n                    Math.random() * 30));\r\n            }\r\n\r\n            this.bodies.push(new Ship(this.logger, this.width / 2, this.height / 4));\r\n\r\n            for (let i = 0; i < 10; i++) {\r\n                this.bodies.push(new Drone(\r\n                    this.logger,\r\n                    Math.random() * this.width,\r\n                    Math.random() * this.height));\r\n            }\r\n        }\r\n\r\n        public update(time: number, input: IInput) {\r\n            this.gcCountdown -= time;\r\n            if (this.gcCountdown < 0) {\r\n                // remove dead bodies\r\n                let old = this.bodies;\r\n                this.bodies = [];\r\n                for (let i = 0; i < old.length; i++) {\r\n                    if (!old[i].isDead) {\r\n                        old[i].update(time, this, input);\r\n                        this.bodies.push(old[i]);\r\n                    }\r\n                }\r\n            } else {\r\n                // optimize speed\r\n                for (let i = 0; i < this.bodies.length; i++) {\r\n                    if (!this.bodies[i].isDead) {\r\n                        this.bodies[i].update(time, this, input);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        public render(ctx: CanvasRenderingContext2D) {\r\n            ctx.fillStyle = \"black\";\r\n            ctx.fillRect(0, 0, this.width, this.height);\r\n            ctx.fill();\r\n\r\n             for (let i = 0; i < this.bodies.length; i++) {\r\n                if (!this.bodies[i].isDead) {\r\n                    this.bodies[i].render(ctx);\r\n                }\r\n             }\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}